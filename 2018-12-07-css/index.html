<!DOCTYPE html>
<html>
  <head>
    <title>Stencila</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <link rel="stylesheet" href="style.css"> 
  </head>
  <body>
    <!-- Put your Markdown slide show in this textarea element -->
    <textarea id="source">
class: center, middle

## Easy reproducibility with Dockter

<img src="logo-name.svg" width="300" />

#### Code for Science and Society - Commmunity Call

#### 7th December 2018

<div>
  <a href="https://twitter.com/stencila">@stencila</a>
</div>

<p style="position: absolute; bottom: 10px; font-size: 10px">Press <code>P</code> to switch to presenter mode</p>

---
### Complex reproducibility 

- packages versions
- system requirements
- 


![](exec-doc.svg)


???
True reproducible research is hard to achieve. Reproducible documents, including Stencila, contain much more than just text.
Reproducible and interactive documents require installing the right version of, for example, R or Python, the correct packages (and their
versions), any necessary system requirements and so on. 


---
### Container complexity 


```
FROM ubuntu:18.04

ENV TZ="Etc/UTC" \
    R_LIBS_USER="~/R"

RUN apt-get update \
 && DEBIAN_FRONTEND=noninteractive apt-get install -y \
      apt-transport-https \
      ca-certificates \
      curl \
      software-properties-common

# This section adds system repositories required to install extra system packages.
RUN apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 51716619E084DAB9
RUN apt-add-repository "deb https://mran.microsoft.com/snapshot/2018-11-05/bin/linux/ubuntu bionic-cran35/"

# This section installs system packages required for your project
# If you need extra system packages add them here.
RUN apt-get update \
 && DEBIAN_FRONTEND=noninteractive apt-get install -y \
      r-base \
 && apt-get autoremove -y \
 && apt-get clean \
 && rm -rf /var/lib/apt/lists/*

# This section copies package requirement files into the image
COPY .DESCRIPTION DESCRIPTION

# This section runs commands to install the packages specified in the requirement file/s
RUN mkdir -p ~/R && bash -c "Rscript <(curl -sL https://unpkg.com/@stencila/dockter/src/install.R)"
```

???
Containers such as Docker provide a solution for packaging together all necessary dependencies for reproducible documents. However, 
containers themselves can be complex and are yet another skill to learn. Docker containers are generated through user-written Dockerfiles
which are not the most straightforward tool to learn.

---
###  Dockter simplicity

* project in R - all files in`geoproj` directory
* required R packages

```R
library("sp")
library("rgdal")
library("RColorBrewer")
```

* Dockter in action:

```bash
$ dockter compile geoproj
```

* created files:

```bash
.Dockerfile
.DESCRIPTION
```

???
In Stencila we developed a tool called Dockter to help researchers create Docker containers. Dockter generates the Dockerfile directly
from the source code used in the research document. You can inspect the generated Dockerfile and edit it manually. 


---
###  Dockter who

```bash
$ dockter who
$
```


???
This section below the question marks is for speaker notes.

    </textarea>
    <!-- End of Markdown slide show -->
    <script src="remark-latest.min.js" type="text/javascript"></script>
    <script src="https://remarkjs.com/downloads/remark-latest.min.js" type="text/javascript">
    </script>
    <script type="text/javascript">
      var slideshow = remark.create({
        slideNumberFormat: ''
      });
    </script>
  </body>
</html>
